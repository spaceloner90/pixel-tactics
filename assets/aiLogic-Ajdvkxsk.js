import{g as A,F as d,a as E,b as n}from"./index-ByZ869Zp.js";const y=(i,a,T)=>{const h=T[0].length,v=T.length,p=A(i,a,T),c=[],f=a.filter(t=>t.faction===d.PLAYER);if(f.length===0)return{action:"WAIT"};if(p.forEach(t=>{const o={...i,position:t};E(o,a,h,v).forEach(r=>{const e=a.find(m=>m.position.x===r.x&&m.position.y===r.y);e&&e.faction===d.PLAYER&&c.push({moveTile:t,targetUnit:e,distToTargetFromStart:n(i.position,e.position),moveDist:n(i.position,t)})})}),c.length>0){c.sort((o,s)=>o.distToTargetFromStart!==s.distToTargetFromStart?o.distToTargetFromStart-s.distToTargetFromStart:s.moveDist-o.moveDist);const t=c[0];return{action:"ATTACK",movePos:t.moveTile,targetId:t.targetUnit.id}}let g=null,l=1/0;return f.forEach(t=>{const o=n(i.position,t.position);o<l&&(l=o,g=t)}),g?(p.sort((o,s)=>{const r=n(o,g.position),e=n(s,g.position);if(r!==e)return r-e;const m=n(i.position,o);return n(i.position,s)-m}),{action:"MOVE",movePos:p[0]}):{action:"WAIT"}};export{y as calculateEnemyAction};
